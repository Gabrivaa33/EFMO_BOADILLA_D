<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fantasy EFMO</title>
  <link rel="icon" href="favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    :root {
      --primary: #0f172a;
      --secondary: #1e293b;
      --accent: #f59e0b;
      --text: #f1f5f9;
      --text-light: #cbd5e1;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #dc2626;
      --goalkeeper: #f97316;
      --defender: #3b82f6;
      --midfielder: #10b981;
      --attacker: #ef4444;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0c4a6e 0%, #1e3a8a 50%, #1e1b4b 100%);
      color: var(--text);
      min-height: 100vh;
    }
    
    .app-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem;
    }
    
    .header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: rgba(30, 41, 59, 0.7);
      border-radius: 16px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
    }
    
    .header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(to right, #fbbf24, #f59e0b, #d97706);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 0.5rem;
    }
    
    .dashboard {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    
    @media (min-width: 1024px) {
      .dashboard {
        grid-template-columns: 320px 1fr;
      }
    }
    
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .card {
      background: rgba(30, 41, 59, 0.7);
      border-radius: 16px;
      padding: 1.5rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1.25rem;
    }
    
    .card-header i {
      margin-right: 0.75rem;
      font-size: 1.25rem;
      color: var(--accent);
    }
    
    .card-header h2 {
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }
    
    .stat-item {
      text-align: center;
      padding: 1rem 0.5rem;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .stat-icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    
    .stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .stat-label {
      font-size: 0.75rem;
      color: var(--text-light);
    }
    
    .filter-group {
      margin-bottom: 1rem;
    }
    
    .filter-label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    .filter-select {
      width: 100%;
      padding: 0.75rem;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text);
      font-size: 0.875rem;
      transition: all 0.2s;
    }
    
    .filter-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2);
    }
    
    .news-container {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 0.5rem;
    }
    
    .news-item {
      padding: 0.875rem;
      margin-bottom: 0.75rem;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    
    .news-item:hover {
      background: rgba(15, 23, 42, 0.7);
      border-left-color: var(--accent);
    }
    
    .news-item a {
      text-decoration: none;
      color: inherit;
      display: block;
    }
    
    .news-item a:hover {
      text-decoration: none;
    }
    
    .news-title {
      font-weight: 600;
      font-size: 0.875rem;
      margin-bottom: 0.25rem;
      color: var(--accent);
    }
    
    .news-text {
      font-size: 0.75rem;
      color: var(--text-light);
    }
    
    .players-section {
      display: flex;
      flex-direction: column;
    }
    
    .players-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .players-title {
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .players-count {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    .players-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.25rem;
    }
    
    .player-card {
      background: rgba(30, 41, 59, 0.7);
      border-radius: 16px;
      padding: 1.5rem;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .player-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.3);
    }
    
    .player-card.available {
      border: 4px solid var(--success);
    }
    
    .player-card.injured {
      border: 4px solid var(--danger);
    }
    
    .player-card.doubt {
      border: 4px solid var(--warning);
    }
    
    .player-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
    }
    
    .player-info {
      flex: 1;
    }
    
    .player-name {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    
    .player-position {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .position-goalkeeper {
      background: rgba(249, 115, 22, 0.2);
      color: #fdba74;
      border: 1px solid rgba(249, 115, 22, 0.3);
    }
    
    .position-defender {
      background: rgba(59, 130, 246, 0.2);
      color: #93c5fd;
      border: 1px solid rgba(59, 130, 246, 0.3);
    }
    
    .position-midfielder {
      background: rgba(16, 185, 129, 0.2);
      color: #86efac;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    .position-attacker {
      background: rgba(239, 68, 68, 0.2);
      color: #fca5a5;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .player-points {
      text-align: right;
    }
    
    .points-label {
      font-size: 1rem;
      color: var(--text-light);
      margin-bottom: 0.25rem;
      font-weight: 600;
    }
    
    .points-value {
      font-size: 1.75rem;
      font-weight: 800;
    }
    
    .points-avg {
      font-size: 1rem;
      color: var(--text-light);
      font-weight: 500;
    }
    
    .player-performance {
      margin-bottom: 1rem;
    }
    
    .performance-label {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-bottom: 0.5rem;
    }
    
    .performance-badges {
      display: flex;
      gap: 0.5rem;
    }
    
    .score-badge {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 700;
    }
    
    .score-red {
      background: linear-gradient(135deg, #ff3200, #dc2626);
      color: white;
    }
    
    .score-gray {
      background: linear-gradient(135deg, #d6d6d6, #a3a3a3);
      color: #000;
    }
    
    .score-yellow {
      background: linear-gradient(135deg, #ffff42, #eab308);
      color: #000;
    }
    
    .score-green {
      background: linear-gradient(135deg, #23d750, #16a34a);
      color: #000;
    }
    
    .score-blue {
      background: linear-gradient(135deg, #4bffff, #0ea5e9);
      color: #000;
    }
    
    .score-null {
      background: linear-gradient(135deg, #d6d6d6, #a3a3a3);
      color: #000;
    }
    
    .player-status {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .status-available {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
    }
    
    .status-injured {
      background: linear-gradient(135deg, var(--danger), #b91c1c);
      color: white;
    }
    
    .status-doubt {
      background: linear-gradient(135deg, var(--warning), #d97706);
      color: #000;
    }
    
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1rem;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal {
      background: rgba(30, 41, 59, 0.95);
      border-radius: 20px;
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      transform: scale(0.9);
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active .modal {
      transform: scale(1);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 1.5rem 1.5rem 0;
      margin-bottom: 1.5rem;
    }
    
    .modal-player-info {
      flex: 1;
    }
    
    .modal-player-name {
      font-size: 1.75rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
    }
    
    .modal-player-position {
      display: inline-block;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .modal-goalkeeper {
      background: rgba(249, 115, 22, 0.2);
      color: #fdba74;
      border: 1px solid rgba(249, 115, 22, 0.3);
    }
    
    .modal-defender {
      background: rgba(59, 130, 246, 0.2);
      color: #93c5fd;
      border: 1px solid rgba(59, 130, 246, 0.3);
    }
    
    .modal-midfielder {
      background: rgba(16, 185, 129, 0.2);
      color: #86efac;
      border: 1px solid rgba(16, 185, 129, 0.3);
    }
    
    .modal-attacker {
      background: rgba(239, 68, 68, 0.2);
      color: #fca5a5;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .modal-close {
      background: none;
      border: none;
      color: var(--text-light);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.2s;
    }
    
    .modal-close:hover {
      color: var(--text);
    }
    
    .modal-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      padding: 0 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .modal-stat {
      background: rgba(15, 23, 42, 0.7);
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
    }
    
    .modal-stat-value {
      font-size: 1.5rem;
      font-weight: 800;
      margin-bottom: 0.25rem;
    }
    
    .modal-stat-label {
      font-size: 0.75rem;
      color: var(--text-light);
    }
    
    .modal-news {
      padding: 0 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .modal-news-item {
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    
    .modal-news-doubt {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.2);
    }
    
    .modal-news-injury {
      background: rgba(220, 38, 38, 0.1);
      border: 1px solid rgba(220, 38, 38, 0.2);
    }
    
    .modal-news-title {
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
    }
    
    .modal-news-doubt .modal-news-title {
      color: var(--warning);
    }
    
    .modal-news-injury .modal-news-title {
      color: var(--danger);
    }
    
    .modal-news-title i {
      margin-right: 0.5rem;
    }
    
    .modal-news-text {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    .modal-performances {
      padding: 0 1.5rem 1.5rem;
    }
    
    .modal-performances-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
    }
    
    .modal-performances-title i {
      margin-right: 0.5rem;
      color: var(--accent);
    }
    
    .performance-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background: rgba(15, 23, 42, 0.5);
      border-radius: 10px;
      margin-bottom: 0.75rem;
    }
    
    .performance-match {
      font-weight: 600;
    }
    
    .performance-comment {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    /* Scrollbar personalizado */
    ::-webkit-scrollbar {
      width: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.5);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: rgba(100, 116, 139, 0.5);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(100, 116, 139, 0.8);
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="header">
      <h1>Fantasy EFMO - Equipo D</h1>
    </header>
    
    <div class="dashboard">
      <div class="sidebar">
        <div class="card">
          <div class="card-header">
            <i class="fas fa-chart-pie"></i>
            <h2>Resumen del Equipo</h2>
          </div>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-icon"><i class="fas fa-users"></i></div>
              <div class="stat-value" id="playerCount">20</div>
              <div class="stat-label">Jugadores</div>
            </div>
            <div class="stat-item">
              <div class="stat-icon"><i class="fas fa-user-injured"></i></div>
              <div class="stat-value" id="injuredCount">0</div>
              <div class="stat-label">Lesionados</div>
            </div>
            <div class="stat-item">
              <div class="stat-icon"><i class="fas fa-question-circle"></i></div>
              <div class="stat-value" id="doubtCount">2</div>
              <div class="stat-label">Con Duda</div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <i class="fas fa-filter"></i>
            <h2>Filtros</h2>
          </div>
          <div class="filter-group">
            <label class="filter-label">Posición</label>
            <select id="positionFilter" class="filter-select">
              <option value="all">Todas las posiciones</option>
              <option value="Portero">Portero</option>
              <option value="Defensa">Defensa</option>
              <option value="Centrocampista">Centrocampista</option>
              <option value="Atacante">Atacante</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Estado</label>
            <select id="statusFilter" class="filter-select">
              <option value="all">Todos los estados</option>
              <option value="OK">Disponible</option>
              <option value="Lesionado">Lesionado</option>
              <option value="Duda">Duda</option>
            </select>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <i class="fas fa-newspaper"></i>
            <h2>Noticias del Equipo</h2>
          </div>
          <div id="injuryFeed" class="news-container">
            <!-- Las noticias se cargarán aquí -->
          </div>
        </div>
      </div>
      
      <div class="players-section">
        <div class="players-header">
          <h2 class="players-title">Plantilla del Equipo</h2>
          <div class="players-count">Mostrando <span id="showingCount">20</span> de 20 jugadores</div>
        </div>
        <div id="gridView" class="players-grid">
          <!-- Las tarjetas de jugadores se cargarán aquí -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal de estadísticas -->
  <div id="statModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-player-info">
          <h3 id="modalName" class="modal-player-name">Nombre del Jugador</h3>
          <div id="modalPosition" class="modal-player-position modal-goalkeeper">Portero</div>
          <div id="modalStatus" class="player-status status-available">Disponible</div>
        </div>
        <button id="closeModal" class="modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-stats">
        <div class="modal-stat">
          <div id="modalPoints" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Puntos Totales</div>
        </div>
        <div class="modal-stat">
          <div id="modalMinutes" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Minutos</div>
        </div>
        <div class="modal-stat">
          <div id="modalAvgPoints" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Media Puntos</div>
        </div>
        <div class="modal-stat">
          <div id="modalGoals" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Goles</div>
        </div>
        <div class="modal-stat">
          <div id="modalAssists" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Asistencias</div>
        </div>
        <div class="modal-stat">
          <div id="modalCards" class="modal-stat-value">0</div>
          <div class="modal-stat-label">Tarjetas</div>
        </div>
      </div>
      
      <div id="modalNews" class="modal-news">
        <!-- Noticias específicas del jugador se cargarán aquí -->
      </div>
      
      <div class="modal-performances">
        <h4 class="modal-performances-title">
          <i class="fas fa-chart-line"></i>
          Últimas actuaciones
        </h4>
        <div id="modalPerformances">
          <!-- Las actuaciones se cargarán aquí -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // Datos de jugadores del Equipo D
    const players = [
      { id:1, name:'Edu', pos:'Portero', status:'OK', performances:[
        {points:4, minutes:35, goals:0, assists:0, cards:0, comment:'↪️ (6,8)'},
        {points:5, minutes:35, goals:0, assists:0, cards:0, comment:'↩️ (7,0)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:2, name:'Rodri', pos:'Portero', status:'OK', performances:[
        {points:6, minutes:35, goals:0, assists:0, cards:0, comment:'↩️ (7,2)'},
        {points:3, minutes:35, goals:0, assists:0, cards:0, comment:'↪️ (6,7)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:3, name:'Thiago', pos:'Defensa', status:'OK', performances:[
        {points:4, minutes:61, goals:0, assists:0, cards:0, comment:'↪️ (6,8)'},
        {points:7, minutes:54, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,5)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:4, name:'Pablo', pos:'Defensa', status:'OK', performances:[
        {points:8, minutes:56, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,6)'},
        {points:7, minutes:70, goals:0, assists:0, cards:0, comment:'(7,4)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:5, name:'Yago', pos:'Defensa', status:'Duda', performances:[
        {points:6, minutes:30, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,3)'},
        {points:6, minutes:34, goals:0, assists:0, cards:0, comment:'↩️↪️↩️ (7,2)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:6, name:'Alonso', pos:'Defensa', status:'OK', performances:[
        {points:5, minutes:23, goals:0, assists:0, cards:0, comment:'↩️↪️↩️ (7,0)'},
        {points:3, minutes:16, goals:0, assists:0, cards:0, comment:'↩️↪️ (6,7)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:7, name:'Lucas S.', pos:'Defensa', status:'OK', performances:[
        {points:-1, minutes:40, goals:0, assists:0, cards:1, comment:'🟨↩️↪️ (5,9)'},
        {points:6, minutes:49, goals:0, assists:0, cards:0, comment:'↪️↩️↪️ (7,2)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:8, name:'Mario', pos:'Defensa', status:'OK', performances:[
        {points:13, minutes:70, goals:1, assists:0, cards:0, comment:'⚽ (7,7+⚽)'},
        {points:6, minutes:70, goals:0, assists:0, cards:0, comment:'(7,2)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:9, name:'Lucas G.', pos:'Defensa', status:'OK', performances:[
        {points:6, minutes:54, goals:0, assists:0, cards:0, comment:'↪️↩️↪️ (7,3)'},
        {points:7, minutes:36, goals:0, assists:1, cards:0, comment:'↪️↩️↪️🅰️ (7,3+🅰️)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:10, name:'Papu', pos:'Defensa', status:'OK', performances:[
        {points:3, minutes:16, goals:0, assists:0, cards:0, comment:'↩️↪️↩️ (6,7)'},
        {points:1, minutes:21, goals:0, assists:0, cards:1, comment:'🟨↩️↪️↩️ (6,2)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:11, name:'Íñigo', pos:'Centrocampista', status:'Duda', performances:[
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'No convocado'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'No convocado'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:12, name:'Esteban', pos:'Centrocampista', status:'OK', performances:[
        {points:13, minutes:52, goals:1, assists:0, cards:0, comment:'↪️↩️⚽ (7,8+⚽)'},
        {points:2, minutes:36, goals:0, assists:0, cards:1, comment:'🟨↪️↩️↪️ (6,5)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:13, name:'Nacho', pos:'Centrocampista', status:'OK', performances:[
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'No convocado'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'No convocado'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:14, name:'Marcos', pos:'Centrocampista', status:'OK', performances:[
        {points:4, minutes:32, goals:0, assists:0, cards:0, comment:'↩️↪️ (6,8)'},
        {points:14, minutes:51, goals:1, assists:0, cards:0, comment:'↩️⚽ (8,0+⚽)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:15, name:'Gonzalo', pos:'Centrocampista', status:'OK', performances:[
        {points:7, minutes:56, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,4)'},
        {points:5, minutes:53, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,0)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:16, name:'Gascón', pos:'Centrocampista', status:'OK', performances:[
        {points:9, minutes:40, goals:1, assists:0, cards:0, comment:'↩️↪️⚽ (7,3+⚽)'},
        {points:10, minutes:34, goals:0, assists:2, cards:0, comment:'↩️↪️↩️🅰️🅰️ (7,6+🅰️🅰️)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:17, name:'Javi', pos:'Centrocampista', status:'OK', performances:[
        {points:9, minutes:56, goals:0, assists:1, cards:0, comment:'↪️↩️🅰️ (7,6+🅰️)'},
        {points:12, minutes:41, goals:1, assists:0, cards:0, comment:'↪️↩️↪️↩️⚽ (7,7+⚽)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:18, name:'Diego', pos:'Atacante', status:'OK', performances:[
        {points:6, minutes:62, goals:0, assists:0, cards:0, comment:'↪️↩️ (7,3)'},
        {points:3, minutes:49, goals:0, assists:0, cards:0, comment:'↪️↩️↪️ (6,7)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:19, name:'Sergio', pos:'Atacante', status:'OK', performances:[
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'No convocado'},
        {points:3, minutes:38, goals:0, assists:0, cards:0, comment:'↩️↪️↩️ (6,7)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]},
      
      { id:20, name:'Lucas O.', pos:'Atacante', status:'OK', performances:[
        {points:16, minutes:52, goals:2, assists:0, cards:0, comment:'↪️↩️⚽⚽🅿️ (8,3+⚽+⚽🅿️)'},
        {points:8, minutes:48, goals:1, assists:0, cards:0, comment:'↪️↩️↪️ (7,0+⚽)'},
        {points:null, minutes:0, goals:0, assists:0, cards:0, comment:'-'}
      ]}
    ];

    // 📰 Noticias del equipo D con enlaces
    const news = [
      { playerId: null, title: 'Jornada 2', text: "La Mutual Juan XXIII 'B' 1-3 E.F.M.O. Boadilla 'D'", url: "InformeJ2.html" },
      { playerId: 5, title: 'Duda', text: "Golpe en la cabeza, Desconocido" },
      { playerId: null, title: 'Jornada 1', text: "E.F.M.O. Boadilla 'D' 5-1 Agrup. Lucero Linces 'B'", url: "InformeJ1.html" },
      { playerId: 11, title: 'Duda', text: "Enfermedad, 1-2 semanas" },
      { playerId: null, title: 'Lesiones', text: "Para ver las lesiones o dudas, clica en el jugador y verás la información sobre su estado" }
    ];

    // Render helpers
    function renderScoreBadge(score){
      if(score===null) return `<span class='score-badge score-null'>-</span>`;
      if(score<0) return `<span class='score-badge score-red'>${score}</span>`;
      if(score===0) return `<span class='score-badge score-gray'>${score}</span>`;
      if(score>=1 && score<=4) return `<span class='score-badge score-yellow'>${score}</span>`;
      if(score>=5 && score<=9) return `<span class='score-badge score-green'>${score}</span>`;
      return `<span class='score-badge score-blue'>${score}</span>`;
    }

    function getPositionClass(pos) {
      switch(pos) {
        case 'Portero': return 'position-goalkeeper';
        case 'Defensa': return 'position-defender';
        case 'Centrocampista': return 'position-midfielder';
        case 'Atacante': return 'position-attacker';
        default: return '';
      }
    }

    function getModalPositionClass(pos) {
      switch(pos) {
        case 'Portero': return 'modal-goalkeeper';
        case 'Defensa': return 'modal-defender';
        case 'Centrocampista': return 'modal-midfielder';
        case 'Atacante': return 'modal-attacker';
        default: return '';
      }
    }

    function getStatusClass(status) {
      switch(status) {
        case 'OK': return 'status-available';
        case 'Lesionado': return 'status-injured';
        case 'Duda': return 'status-doubt';
        default: return 'status-available';
      }
    }

    function getCardStatusClass(status) {
      switch(status) {
        case 'OK': return 'available';
        case 'Lesionado': return 'injured';
        case 'Duda': return 'doubt';
        default: return 'available';
      }
    }

    function renderStatusBadge(status){
      switch(status) {
        case 'OK': return `<span class='player-status status-available'><i class="fas fa-check-circle mr-1"></i>Disponible</span>`;
        case 'Lesionado': return `<span class='player-status status-injured'><i class="fas fa-user-injured mr-1"></i>Lesionado</span>`;
        case 'Duda': return `<span class='player-status status-doubt'><i class="fas fa-question-circle mr-1"></i>Duda</span>`;
        default: return `<span class='player-status status-available'>Disponible</span>`;
      }
    }

    function calculateTotals(perfs){
      return perfs.reduce((acc,p)=>{
        if(p.points!==null) acc.points+=p.points;
        acc.minutes+=p.minutes;
        acc.goals+=p.goals;
        acc.assists+=p.assists;
        acc.cards+=p.cards;
        return acc;
      }, {points:0, minutes:0, goals:0, assists:0, cards:0});
    }

    function calculateAvg(perfs){
      const valid = perfs.filter(p=>p.points!==null).map(p=>p.points);
      if(valid.length===0) return 0;
      return (valid.reduce((a,b)=>a+b,0)/valid.length).toFixed(2);
    }
    
    function renderInjuryFeed(){
      const feed = document.getElementById('injuryFeed');
      feed.innerHTML = '';

      // Solo mostrar noticias generales (sin jugador vinculado)
      const generalNews = news.filter(n => n.playerId === null);

      generalNews.forEach(n => {
        const div = document.createElement('div');
        div.className = 'news-item';
        
        // Verificar si la noticia tiene URL
        if (n.url) {
          div.innerHTML = `
            <a href="${n.url}" target="_blank" class="block hover:no-underline">
              <div class="news-title">${n.title} <i class="fas fa-external-link-alt text-xs ml-1"></i></div>
              <div class="news-text">${n.text}</div>
            </a>
          `;
        } else {
          div.innerHTML = `
            <div class="news-title">${n.title}</div>
            <div class="news-text">${n.text}</div>
          `;
        }
        
        feed.appendChild(div);
      });
    }
    
    function render(){
      const grid = document.getElementById('gridView');
      const posFilter = document.getElementById('positionFilter').value;
      const statusFilter = document.getElementById('statusFilter').value;
      const filtered = players.filter(p => 
        (posFilter === 'all' || p.pos === posFilter) && 
        (statusFilter === 'all' || p.status === statusFilter)
      );
      
      grid.innerHTML = '';

      filtered.forEach(p => {
        const lastThree = p.performances.slice(-3);
        const totals = calculateTotals(p.performances);
        const avgPoints = calculateAvg(p.performances);

        const card = document.createElement('div');
        card.className = `player-card ${getCardStatusClass(p.status)}`;
        
        card.innerHTML = `
          <div class="player-header">
            <div class="player-info">
              <div class="player-name">${p.name}</div>
              <div class="player-position ${getPositionClass(p.pos)}">${p.pos}</div>
            </div>
            <div class="player-points">
              <div class="points-label">Puntos</div>
              <div class="points-value">${totals.points}</div>
              <div class="points-avg">Media: ${avgPoints}</div>
            </div>
          </div>
          
          <div class="player-performance">
            <div class="performance-label">Últimas jornadas</div>
            <div class="performance-badges">
              ${lastThree.map(l => renderScoreBadge(l.points)).join('')}
            </div>
          </div>
          
          <div>
            ${renderStatusBadge(p.status)}
          </div>
        `;
        
        card.onclick = () => openModal(p.id);
        grid.appendChild(card);
      });

      // Actualizar contadores
      document.getElementById('playerCount').textContent = players.length;
      document.getElementById('injuredCount').textContent = players.filter(p => p.status === "Lesionado").length;
      document.getElementById('doubtCount').textContent = players.filter(p => p.status === "Duda").length;
      document.getElementById('showingCount').textContent = filtered.length;

      renderInjuryFeed();
    }

    function openModal(id){
      const p = players.find(x => x.id === id); 
      if(!p) return;
      
      document.getElementById('modalName').textContent = p.name;
      document.getElementById('modalPosition').textContent = p.pos;
      document.getElementById('modalPosition').className = `modal-player-position ${getModalPositionClass(p.pos)}`;
      
      const totals = calculateTotals(p.performances);
      document.getElementById('modalPoints').textContent = totals.points;
      document.getElementById('modalMinutes').textContent = totals.minutes;
      document.getElementById('modalGoals').textContent = totals.goals;
      document.getElementById('modalAssists').textContent = totals.assists;
      document.getElementById('modalCards').textContent = totals.cards;
      document.getElementById('modalAvgPoints').textContent = calculateAvg(p.performances);
      
      // Actualizar estado en el modal
      const modalStatus = document.getElementById('modalStatus');
      modalStatus.className = `player-status ${getStatusClass(p.status)}`;
      modalStatus.innerHTML = renderStatusBadge(p.status).replace('player-status', '');

      const perfDiv = document.getElementById('modalPerformances'); 
      perfDiv.innerHTML = '';
      
      const modalNews = document.getElementById('modalNews');
      modalNews.innerHTML = '';
      
      // Mostrar noticia asociada (si existe)
      const playerNews = news.find(n => n.playerId === p.id);
      if (playerNews) {
        const newsDiv = document.createElement('div');
        // Determinar la clase según el tipo de noticia
        const newsClass = playerNews.title === 'Lesión' ? 'modal-news-injury' : 'modal-news-doubt';
        newsDiv.className = `modal-news-item ${newsClass}`;
        newsDiv.innerHTML = `
          <div class="modal-news-title">
            <i class="fas fa-exclamation-circle"></i>
            ${playerNews.title}
          </div>
          <div class="modal-news-text">${playerNews.text}</div>
        `;
        modalNews.appendChild(newsDiv);
      }

      // Mostrar actuaciones
      p.performances.forEach((perf, i) => {
        const div = document.createElement('div');
        div.className = 'performance-item';
        div.innerHTML = `
          <div class="performance-match">
            Jornada ${i+1}: ${renderScoreBadge(perf.points)}
          </div>
          <div class="performance-comment">${perf.comment}</div>
        `;
        perfDiv.appendChild(div);
      });
      
      // Mostrar modal
      document.getElementById('statModal').classList.add('active');
    }

    // Event listeners
    document.getElementById('positionFilter').addEventListener('change', render);
    document.getElementById('statusFilter').addEventListener('change', render);
    
    document.getElementById('closeModal').addEventListener('click', () => {
      document.getElementById('statModal').classList.remove('active');
    });
    
    document.getElementById('statModal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('statModal')) {
        document.getElementById('statModal').classList.remove('active');
      }
    });

    // Inicializar
    render();
  </script>
</body>
</html>
